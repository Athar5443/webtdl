<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Downloader</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>YouTube Downloader</h1>
        <p>Download your favorite videos in MP3 or MP4 format!</p>

        <!-- Input untuk URL Video -->
        <input type="text" id="videoUrl" placeholder="Masukkan URL video YouTube">

        <!-- Pilihan Format -->
        <select id="downloadType">
            <option value="audio">MP3 (Audio)</option>
            <option value="video">MP4 (Video)</option>
        </select>

        <!-- Tombol Unduh -->
        <button onclick="fetchData()">Unduh</button>

        <!-- Tempat untuk Menampilkan Data -->
        <div id="result" style="display: none; margin-top: 20px;">
            <h3>Detail Video</h3>
            <p><strong>Judul:</strong> <span id="title"></span></p>
            <p><strong>Channel:</strong> <span id="channel"></span></p>
            <p><strong>Durasi:</strong> <span id="duration"></span></p>
            <p><strong>Views:</strong> <span id="views"></span></p>
            <p><strong>Likes:</strong> <span id="likes"></span></p>
            <a id="downloadLink" href="#" target="_blank">
                <button>Mulai Unduh</button>
            </a>
        </div>

        <!-- Pesan Error -->
        <div id="error" class="error-message" style="display: none;"></div>
    </div>

    <script>
        async function fetchData() {
            const videoUrl = document.getElementById('videoUrl').value;
            const downloadType = document.getElementById('downloadType').value;
            const resultDiv = document.getElementById('result');
            const errorDiv = document.getElementById('error');

            // Reset tampilan
            resultDiv.style.display = 'none';
            errorDiv.style.display = 'none';

            // Validasi URL
            if (!videoUrl) {
                errorDiv.textContent = "Harap masukkan URL video YouTube.";
                errorDiv.style.display = 'block';
                return;
            }

            try {
                // Panggil API berdasarkan jenis download
                const apiUrl = `https://api.neoxr.eu/api/youtube?url=${encodeURIComponent(videoUrl)}&type=${downloadType}&quality=${downloadType === 'audio' ? '128kbps' : '1080p'}&apikey=AtharBotz`;
                const response = await fetch(apiUrl);
                const data = await response.json();

                if (data.status === false) {
                    throw new Error(data.message || "Terjadi kesalahan saat mengambil data.");
                }

                // Tampilkan data video
                document.getElementById('title').textContent = data.title;
                document.getElementById('channel').textContent = data.channel;
                document.getElementById('duration').textContent = data.duration;
                document.getElementById('views').textContent = data.views;
                document.getElementById('likes').textContent = data.likes;
                document.getElementById('downloadLink').href = data.download;

                // Tampilkan hasil
                resultDiv.style.display = 'block';
            } catch (error) {
                // Tampilkan pesan error
                errorDiv.textContent = error.message;
                errorDiv.style.display = 'block';
            }
        }
    </script>
</body>
</html>